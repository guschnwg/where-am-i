(this["webpackJsonpwhere-am-i"]=this["webpackJsonpwhere-am-i"]||[]).push([[0],{104:function(e,t){},106:function(e,t){},141:function(e,t){},142:function(e,t){},184:function(e,t,a){},185:function(e,t,a){},189:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(89),c=a.n(s),r=a(51),i=a(13),l=a(14),m=a(52),u=a(90),p=new m.a(m.b),g="https://maps.googleapis.com/maps/api/js?key="+Object({NODE_ENV:"production",PUBLIC_URL:"/where-am-i"}).REACT_APP_GOOGLE_MAPS_API_KEY,f=o.a.createContext(),h=(f.Consumer,Object(u.a)(g,{globalName:"google"})((function(e){var t=e.google,a=e.children;if(!t)return o.a.createElement("span",null,"Loading...");return o.a.createElement(f.Provider,{value:{google:t,randomStreetView:function(){var e=p.real(-60,77),a=p.real(-180,180),n=new t.maps.StreetViewService,o=new t.maps.LatLng(e,a);return new Promise((function(e,t){n.getPanorama({location:o,radius:1e6,source:"outdoor"},(function(a){a?e(a.location.latLng):t()}))}))}}},a)}))),d=f,w={addressControl:!1,showRoadLabels:!1,pov:{heading:100,pitch:0},zoom:1},b=function(e){var t=e.mapClassName,a=e.containerClassName,s=e.coordinates,c=Object(n.useContext)(d).google,r=Object(n.useRef)(null),i=Object(n.useState)(),m=Object(l.a)(i,2),u=m[0],p=m[1];return Object(n.useEffect)((function(){u?u.setPosition(s):p(new c.maps.StreetViewPanorama(r.current,w))}),[c.maps.StreetViewPanorama,u,s]),o.a.createElement("div",{className:a,style:{width:"100%",height:"100%"}},o.a.createElement("div",{ref:r,className:t,style:{height:"100%"}}))},E=(a(184),function(e){var t=e.mapClassName,a=e.containerClassName,s=e.point,c=e.onGuessed,r=Object(n.useContext)(d).google,i=Object(n.useRef)(null),m=Object(n.useState)(),u=Object(l.a)(m,2),p=u[0],g=u[1],f=Object(n.useState)(),h=Object(l.a)(f,2),w=h[0],b=h[1],E=Object(n.useState)(),O=Object(l.a)(E,2),v=O[0],C=O[1];Object(n.useEffect)((function(){w&&C((function(e){e&&e.setMap(null);var t=new r.maps.Marker({position:w});return t.setMap(p),t}))}),[r.maps.Marker,w,p]),Object(n.useEffect)((function(){if(!p){var e={zoom:3,minZoom:2,center:new r.maps.LatLng(0,0),streetViewControl:!1,fullscreenControl:!1,mapTypeControl:!1,zoomControlOptions:{position:r.maps.ControlPosition.TOP_RIGHT}},t=new r.maps.Map(i.current,e);t.addListener("click",(function(e){b(e.latLng)})),g(t)}}),[r.maps.Map,r.maps.LatLng,r.maps.Marker,r.maps.ControlPosition.TOP_RIGHT,p]);return o.a.createElement("div",{className:a,style:{position:"relative",height:"100%",width:"100%"}},o.a.createElement("div",{ref:i,className:t,style:{height:"100%",width:"100%"}}),w&&o.a.createElement("button",{className:"guess-confirm",style:{position:"absolute",bottom:"10px",left:"10px",width:"calc(100% - 20px)"},onClick:function(){v.setMap(null),new r.maps.Polyline({path:[w,s]}).setMap(p);var e=r.maps.geometry.spherical.computeDistanceBetween(w,s);new r.maps.Marker({position:s,label:"Distance: ".concat((e/1e3).toFixed(2),"km"),icon:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png"}).setMap(p),new r.maps.Marker({position:w,label:"You guessed",icon:"http://maps.google.com/mapfiles/ms/icons/yellow-dot.png"}).setMap(p),c()}},"GUESS"))}),O=(a(185),function(){var e=Object(n.useContext)(d).randomStreetView,t=Object(n.useState)(),a=Object(l.a)(t,2),s=a[0],c=a[1],r=Object(n.useCallback)((function(){e().then(c).catch(r)}),[e]);return Object(n.useEffect)((function(){r()}),[r]),o.a.createElement("div",{className:"container"},o.a.createElement("h1",{className:"title"},"Where Am I?"),o.a.createElement("div",{className:"game-container"},o.a.createElement(b,{containerClassName:"street-view-container",mapClassName:"street-view-map",coordinates:s}),o.a.createElement(E,{containerClassName:"guess-container",mapClassName:"guess-map",point:s,onGuessed:r})))}),v=function(){return o.a.createElement(h,null,o.a.createElement(r.a,{basename:"/where-am-i"},o.a.createElement(i.c,null,o.a.createElement(i.a,{path:"/guessing"},o.a.createElement(O,null)),o.a.createElement(i.a,{path:"/"},o.a.createElement(r.b,{to:"/guessing"},"Guessing game")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},92:function(e,t,a){e.exports=a(189)}},[[92,1,2]]]);
//# sourceMappingURL=main.3925ed3f.chunk.js.map