(this["webpackJsonpwhere-am-i"]=this["webpackJsonpwhere-am-i"]||[]).push([[0],{105:function(e,t){},107:function(e,t){},142:function(e,t){},143:function(e,t){},190:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(89),r=a.n(i),s=a(51),c=a(13),l=a(14),u=a(52),m=a(90),p=new u.a(u.b),g=o.a.createContext(),d=(g.Consumer,Object(m.a)("https://maps.googleapis.com/maps/api/js?key=AIzaSyBGMXRl6H-2uUTOK9tOwaBtVYaDohOEQZQ",{globalName:"google"})((function(e){var t=e.google,a=e.children;if(!t)return o.a.createElement("span",null,"Loading...");return o.a.createElement(g.Provider,{value:{google:t,randomStreetView:function(){var e=p.real(-60,77),a=p.real(-180,180),n=new t.maps.StreetViewService,o=new t.maps.LatLng(e,a);return new Promise((function(e,t){n.getPanorama({location:o,radius:1e6,source:"outdoor"},(function(a){a?e(a.location.latLng):t()}))}))}}},a)}))),f=g,h={addressControl:!1,showRoadLabels:!1,pov:{heading:100,pitch:0},zoom:1},b=function(e){var t=e.coordinates,a=Object(n.useContext)(f).google,i=Object(n.useRef)(null),r=Object(n.useState)(),s=Object(l.a)(r,2),c=s[0],u=s[1];return Object(n.useEffect)((function(){c?c.setPosition(t):u(new a.maps.StreetViewPanorama(i.current,h))}),[a.maps.StreetViewPanorama,c,t]),o.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#eeeeee"}},o.a.createElement("div",{ref:i,style:{height:"100%"}}))},w=a(91),v=function(e){var t=e.point,a=e.onGuessed,i=Object(n.useContext)(f).google,r=Object(n.useRef)(null),s=Object(n.useState)(),c=Object(l.a)(s,2),u=c[0],m=c[1],p=Object(n.useState)(),g=Object(l.a)(p,2),d=g[0],h=g[1],b=Object(n.useState)(),v=Object(l.a)(b,2),E=v[0],O=v[1];Object(n.useEffect)((function(){d&&O((function(e){e&&e.setMap(null);var t=new i.maps.Marker({position:d});return t.setMap(u),t}))}),[i.maps.Marker,d,u]),Object(n.useEffect)((function(){if(!u){var e={zoom:1,center:new i.maps.LatLng(0,0),streetViewControl:!1,fullscreenControl:!1,mapTypeControl:!1},t=new i.maps.Map(r.current,e);t.addListener("click",(function(e){h(e.latLng)})),m(t)}}),[i.maps.Map,i.maps.LatLng,i.maps.Marker,u]);return o.a.createElement("div",{style:{backgroundColor:"#eeeeee",position:"absolute",left:"2vw",bottom:"20px",zIndex:2,border:"2px solid red"}},o.a.createElement(w.Resizable,{defaultSize:{width:320,height:200},minHeight:200,minWidth:200,maxHeight:"30vh",maxWidth:"96vw"},o.a.createElement("div",{style:{position:"relative",height:"100%"}},o.a.createElement("div",{ref:r,style:{height:"100%"}}),d&&o.a.createElement("button",{style:{position:"absolute",bottom:"0",left:"10px",width:"calc(100% - 20px)",height:"20px"},onClick:function(){E.setMap(null),new i.maps.Polyline({path:[d,t]}).setMap(u);var e=i.maps.geometry.spherical.computeDistanceBetween(d,t);new i.maps.Marker({position:t,label:"Distance: ".concat((e/1e3).toFixed(2),"km"),icon:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png"}).setMap(u),new i.maps.Marker({position:d,label:"You guessed",icon:"http://maps.google.com/mapfiles/ms/icons/yellow-dot.png"}).setMap(u),a()}},"Confirm guess"))))},E=function(){var e=Object(n.useContext)(f).randomStreetView,t=Object(n.useState)(),a=Object(l.a)(t,2),i=a[0],r=a[1],s=Object(n.useCallback)((function(){e().then(r).catch(s)}),[e]);return Object(n.useEffect)((function(){s()}),[s]),o.a.createElement("div",{style:{display:"flex",position:"fixed",top:0,bottom:0,left:0,right:0}},o.a.createElement(b,{coordinates:i}),o.a.createElement(v,{point:i,onGuessed:s}))},O=function(){return o.a.createElement(d,null,o.a.createElement(s.a,{basename:"/where-am-i"},o.a.createElement(c.c,null,o.a.createElement(c.a,{path:"/guessing"},o.a.createElement(E,null)),o.a.createElement(c.a,{path:"/"},o.a.createElement(s.b,{to:"/guessing"},"Guessing game")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},93:function(e,t,a){e.exports=a(190)}},[[93,1,2]]]);
//# sourceMappingURL=main.577a4d9f.chunk.js.map